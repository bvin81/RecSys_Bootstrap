{% extends "base.html" %}

{% block title %}GreenRec - Analitika{% endblock %}

{% block page_title %}Analitika Dashboard{% endblock %}

{% block content %}
<div class="analytics-dashboard">
    <!-- Key Metrics -->
    <div class="metrics-grid mb-4">
        <div class="metric-card">
            <h3><span class="icon">üìä</span> F1-Score</h3>
            <div class="metric-value" id="f1-score">-</div>
            <div class="metric-description">Aj√°nl√°si pontoss√°g</div>
        </div>
        
        <div class="metric-card">
            <h3><span class="icon">üåà</span> Diverzit√°s</h3>
            <div class="metric-value" id="diversity-score">-</div>
            <div class="metric-description">Aj√°nl√°sok v√°ltozatoss√°ga</div>
        </div>
        
        <div class="metric-card">
            <h3><span class="icon">‚≠ê</span> El√©gedetts√©g</h3>
            <div class="metric-value" id="satisfaction-score">-</div>
            <div class="metric-description">√Åtlagos √©rt√©kel√©s</div>
        </div>
        
        <div class="metric-card">
            <h3><span class="icon">üå±</span> Fenntarthat√≥s√°g</h3>
            <div class="metric-value" id="sustainability-score">-</div>
            <div class="metric-description">K√∂rnyezeti pontsz√°m</div>
        </div>
    </div>
    
    <!-- Charts Section -->
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="chart-container">
                <h4>üìà Tanul√°si G√∂rb√©k</h4>
                <canvas id="learningCurvesChart"></canvas>
            </div>
        </div>
        
        <div class="col-md-6 mb-4">
            <div class="chart-container">
                <h4>üï∏Ô∏è Csoportok √ñsszehasonl√≠t√°sa</h4>
                <canvas id="groupComparisonChart"></canvas>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="chart-container">
                <h4>üç© √ârt√©kel√©sek Megoszl√°sa</h4>
                <canvas id="metricsChart"></canvas>
            </div>
        </div>
        
        <div class="col-md-6 mb-4">
            <div class="detailed-metrics">
                <h4>üìã R√©szletes Statisztik√°k</h4>
                <div class="stats-list">
                    <div class="stat-item">
                        <span class="stat-label">√ñsszes aj√°nl√°s:</span>
                        <span class="stat-value" id="total-recommendations">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Akt√≠v felhaszn√°l√≥k:</span>
                        <span class="stat-value" id="active-users">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Befejez√©si ar√°ny:</span>
                        <span class="stat-value" id="completion-rate">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Legjobb csoport:</span>
                        <span class="stat-value" id="best-group">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Refresh Button -->
    <div class="text-center">
        <button class="btn btn-primary" onclick="refreshDashboard()">
            <i class="fas fa-sync-alt"></i> Friss√≠t√©s
        </button>
    </div>
</div>

<script>
// Analytics page specific JavaScript
document.addEventListener('DOMContentLoaded', function() {
    console.log('üìä Analytics dashboard loaded');
    
    // Initialize charts
    if (typeof GreenRec !== 'undefined') {
        GreenRec.initializeCharts();
    }
    
    // Load initial data
    refreshDashboard();
});

function refreshDashboard() {
    console.log('üîÑ Refreshing dashboard...');
    
    // Show loading state
    document.querySelectorAll('.metric-value').forEach(el => {
        el.textContent = '...';
    });
    
    // Load dashboard data
    if (typeof GreenRec !== 'undefined') {
        // This will be handled by the main.js GreenRec object
        // The charts will be updated automatically
    }
}
</script>
{% endblock %}
